CFLAGS += $(shell pkg-config --cflags gstreamer-0.10)
CFLAGS += -I../src
CFLAGS += -I../third/jansson-2.4/src
CFLAGS += -std=c99 -g
LDFLAGS += $(shell pkg-config --libs gstreamer-0.10)
LDFLAGS += -lgstapp-0.10
STATIC_JANSSON = ../third/jansson-2.4/src/.libs/libjansson.a

all: itvencoder decoderpipeline config

itvencoder: itvencoder-test.c ../src/itvencoder.c ../src/itvencoder.h ../src/config.h ../src/config.c ../src/decoderpipeline.h ../src/decoderpipeline.c
	gcc $(CFLAGS) $(LDFLAGS) itvencoder-test.c ../src/config.c ../src/decoderpipeline.c ../src/itvencoder.c $(STATIC_JANSSON) -o itvencoder

decoderpipeline: decoderpipeline-test.c ../src/decoderpipeline.c
	gcc $(CFLAGS) $(LDFLAGS) decoderpipeline-test.c ../src/decoderpipeline.c -o decoderpipeline

config: config-test.c ../src/config.c ../src/config.h
	gcc $(CFLAGS) $(LDFLAGS) config-test.c ../src/config.c $(STATIC_JANSSON) -o config

clean:
	rm itvencoder decoderpipeline config
